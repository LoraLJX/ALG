(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b4ffd4c"],{4031:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pag"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":"","page-count":e.page_count},on:{"current-change":e.currntChange,"prev-click":e.preClick,"next-click":e.nextClick}})],1)},i=[],l={props:["page_count"],methods:{currntChange:function(e){this.$emit("pageevent",e)},preClick:function(e){},nextClick:function(e){}}},n=l,o=(s("73a4"),s("9ca4")),c=Object(o["a"])(n,a,i,!1,null,"a4f47362",null);t["a"]=c.exports},"40df":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"mptop"},[s("el-input",{staticClass:"md-search",attrs:{placeholder:"请输入商品名称"},on:{blur:e.searchForPN},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),s("div",{staticClass:"mpclass"},[s("label",{staticClass:"theFrist-cll theFrist-mp"},[e._v("一级分类")]),s("div",{staticClass:"classify"},[s("el-dropdown",{attrs:{"split-button":"",type:"primary"}},[e._v(" "+e._s(e.firstClass)+" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownArr,(function(t,a){return s("el-dropdown-item",{key:a,attrs:{"split-button":"true"},nativeOn:{click:function(t){return e.dropdownClick(t)}}},[e._v(e._s(e.dropdownArr[a]))])})),1)],1)],1),s("label",{staticClass:"theFrist-cll theFrist-mp2 mdf"},[e._v("二级分类")]),s("div",{staticClass:"secondLevelmp"},[s("el-dropdown",{attrs:{"split-button":"",type:"primary"}},[e._v(" "+e._s(e.secondClass)+" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.secondLevelVal,(function(t,a){return s("el-dropdown-item",{key:a,nativeOn:{click:function(t){return e.secondLevelClick(t)}}},[e._v(e._s(e.secondLevelVal[a]))])})),1)],1)],1),s("el-button",{staticClass:"batchDeletion",attrs:{type:"info",plain:"",disabled:e.changedel},on:{click:e.open}},[e._v("批量删除")]),s("el-button",{staticClass:"batchDeletion",attrs:{type:"info",plain:""},on:{click:e.clickRet}},[e._v("重置")])],1)],1),s("el-table",{staticClass:"product-list",staticStyle:{width:"85%"},attrs:{data:e.changedData,border:"",height:585},on:{"selection-change":e.handleSelectionChange,select:e.handlechexCh}},[s("el-table-column",{attrs:{type:"selection"}}),s("el-table-column",{attrs:{prop:"mid",label:"序号",width:"80",sortable:""}}),s("el-table-column",{ref:"kpi",attrs:{prop:"mpdname",label:"商品名称",sortable:""}}),s("el-table-column",{attrs:{label:"商品图片",width:"130"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{attrs:{src:e.row.mimgUrl,width:"65",height:"50"}})]}}])}),s("el-table-column",{attrs:{prop:"mprice",label:"参考价格(元)",width:"130",sortable:"","row.showEdit":""}}),s("el-table-column",{attrs:{prop:"firstClass",label:"一级分类",width:"105",sortable:""}}),s("el-table-column",{attrs:{prop:"secondClass",label:"二级分类",width:"105",sortable:""}}),s("el-table-column",{attrs:{prop:"minventoryQuantity",label:"库存",width:"80",sortable:""}}),s("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),s("el-button",{attrs:{size:"mini",type:"danger",disabled:!1},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),s("el-dialog",{attrs:{title:"提示",visible:e.dialogVisiblebianji,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisiblebianji=t}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px",validate:"valRes"}},[s("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[s("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"一级分类",prop:"cfirstClass"}},[s("el-input",{model:{value:e.ruleForm.cfirstClass,callback:function(t){e.$set(e.ruleForm,"cfirstClass",t)},expression:"ruleForm.cfirstClass"}})],1),s("el-form-item",{attrs:{label:"二级分类",prop:"csecondClass"}},[s("el-input",{model:{value:e.ruleForm.csecondClass,callback:function(t){e.$set(e.ruleForm,"csecondClass",t)},expression:"ruleForm.csecondClass"}})],1),s("el-form-item",{attrs:{label:"价格",prop:"mychangeprice"}},[s("el-input",{model:{value:e.ruleForm.mychangeprice,callback:function(t){e.$set(e.ruleForm,"mychangeprice",t)},expression:"ruleForm.mychangeprice"}})],1),s("el-form-item",{attrs:{label:"库存",prop:"mychangeQty"}},[s("el-input",{model:{value:e.ruleForm.mychangeQty,callback:function(t){e.$set(e.ruleForm,"mychangeQty",t)},expression:"ruleForm.mychangeQty"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1),s("div",{staticClass:"mypage1"},[s("pagenation",{attrs:{page_count:e.page_count},on:{pageevent:e.getpage}})],1)],1)},i=[],l=(s("053b"),s("e18c"),s("a18c")),n=s("4031"),o=s("9dce"),c={data:function(){return{dropdownArr:["狗狗商品","猫猫商品","奇趣小宠","水族市场"],secondLevelVal:["主粮","零食","玩具"],secondLevelObj:{dog:["主粮","零食","玩具"],cat:["主粮","零食","猫砂","玩具"],miniPet:["兔子","仓鼠","龙猫"],fish:["鱼食","鱼缸","器材"]},firstClass:"狗狗商品",secondClass:"主粮",input:"",displayGoodslist:[],willChangeDate:[],changedData:[],imgUrl:"",mid:"",changedel:!1,willdelval:[],dialogVisible:!1,backDelId:"",tableData:[{editTag:{isShow:!0,value:123},test:"Demo"}],dialogVisiblebianji:!1,showBtnOrdinary:!0,namep:"",mychangepricep:"",mychangeQtyp:"",cfirstClassp:"",csecondClassp:"",cid:"",ruleForm:{name:"",mychangeprice:"",mychangeQty:"",cfirstClass:"",csecondClass:""},rules:{cfirstClass:[{required:!0,message:"一级分类不能为空",trigger:"blur"}],name:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],csecondClass:[{message:"二级分类不能为空",trigger:"blur",required:!0}],mychangeprice:[{message:"价格不能为空",trigger:"blur",required:!0}],mychangeQty:[{message:"库存不能为空",trigger:"blur",required:!0}]},page:1,page_count:1,level1:"",level2:""}},mounted:function(){var e=this;this.getMsg(),o["a"].$on("passClickIndex",(function(t){e.getIndexNum=t,e.level1=t.f,e.level2=t.s}))},watch:{page:function(){this.getMsg()},firstClass:function(){this.getMsg()},secondClass:function(){this.getMsg()},willdelval:function(){0===this.willdelval.length?this.changedel=!0:this.changedel=!1},level2:function(){console.log(this.level2),"3-2"==this.level2?this.firstClass="狗狗商品":"3-3"==this.level2?this.firstClass="猫猫商品":"3-4"==this.level2?this.firstClass="奇趣小宠":"3-5"==this.level2&&(this.firstClass="水族市场"),this.getMsg(),console.log(this.firstClass)}},methods:{dropdownClick:function(e){switch(this.changedData=this.willChangeDate,this.firstClass=e.target.innerHTML.substring(7),this.firstClass){case"狗狗商品":this.secondLevelVal=this.secondLevelObj.dog,this.secondClass="主粮";break;case"猫猫商品":this.secondLevelVal=this.secondLevelObj.cat,this.secondClass="主粮";break;case"奇趣小宠":this.secondLevelVal=this.secondLevelObj.miniPet,this.secondClass="兔子";break;case"水族市场":this.secondLevelVal=this.secondLevelObj.fish,this.secondClass="鱼食";break}console.log(this.firstClass);for(var t=[],s=0;s<this.changedData.length;s++)this.firstClass===this.changedData[s].firstClass&&this.secondClass==this.changedData[s].secondClass&&t.push(this.changedData[s]);this.changedData=t},secondLevelClick:function(e){this.changedData=this.willChangeDate,this.secondClass=e.target.innerHTML.substring(7);for(var t=[],s=0;s<this.changedData.length;s++)this.firstClass===this.changedData[s].firstClass&&this.secondClass==this.changedData[s].secondClass&&t.push(this.changedData[s]);this.changedData=t},handleEdit:function(e,t){this.dialogVisiblebianji=!0,this.ruleForm.name=t.mpdname,this.ruleForm.mychangeprice=t.mprice,this.ruleForm.mychangeQty=t.minventoryQuantity,this.ruleForm.cfirstClass=t.firstClass,this.ruleForm.csecondClass=t.secondClass,this.cid=t.pid,this.namep=t.mpdname,this.mychangepricep=t.mprice,this.mychangeQtyp=t.minventoryQuantity,this.cfirstClassp=t.firstClass,this.csecondClassp=t.secondClass},handleClose:function(e){var t=this;this.$confirm("还未提交哦，确认关闭吗？").then((function(s){t.$refs[formName].resetFields(),t.dialogVisiblebianji=!1,e()})).catch((function(e){}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e?t.namep==t.ruleForm.name&&t.mychangepricep==t.ruleForm.mychangeprice&&t.mychangeQtyp==t.ruleForm.mychangeQty&&t.cfirstClassp==t.ruleForm.firstClass&&t.csecondClassp==t.ruleForm.csecondClass?t.dialogVisiblebianji=!1:t.$http.post("/updateProduct",{product_name:t.ruleForm.name,price:t.ruleForm.mychangeprice,count:t.ruleForm.mychangeQty,firstClass:t.ruleForm.cfirstClass,secondClass:t.ruleForm.csecondClass,id:t.cid}).then((function(e){t.dialogVisiblebianji=!1,t.$alert("提示","修改成功！",{confirmButtonText:"确定"}),t.$router.go(0)})).catch((function(e){t.$alert("提示","操作失败！",{confirmButtonText:"确定"}),t.dialogVisiblebianji=!1})):t.$alert("提示","请输入有效的信息",{confirmButtonText:"确定"})}))},resetForm:function(e){var t=this;this.$confirm("还未提交哦，确认取消吗？").then((function(s){t.$refs[e].resetFields(),t.dialogVisiblebianji=!1,done()})).catch((function(e){}))},handleDelete:function(e,t){var s=this;this.backDelId="",console.log(e,t),this.backDelId=t.pid,console.log(this.backDelId),this.$confirm("确认要删除吗？").then((function(e){s.$http.get("/adminDelProduct",{params:{idArr:s.backDelId}}).then((function(e){console.log(e),s.$message({type:"success",message:"删除成功!"}),l["a"].go(0)})).catch((function(e){s.$message({type:"info",message:"请求失败"})})),done()})).catch((function(e){}))},handleSelectionChange:function(e){this.willdelval=e;for(var t=[],s=0;s<e.length;s++)t.push(e[s].mid);this.SingleStatus=t.toString()},handlechexCh:function(e,t,s){},open:function(){var e=this;0!=this.willdelval.length?this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=[],s=0;s<e.willdelval.length;s++)t.push(e.willdelval[s].pid);e.willdelval=t,console.log(e.willdelval);for(var a=0;a<e.willdelval.length;a++)console.log(e.willdelval[a]),e.$http.get("/adminDelProduct",{params:{idArr:e.willdelval[a]}}).then((function(e){console.log(e)})).catch((function(t){e.$message({type:"info",message:"请求失败"})}));e.$message({type:"success",message:"删除成功!"}),l["a"].go(0)})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$alert("请选择要删除的条目","提示",{confirmButtonText:"确定"})},searchForPN:function(){var e=this;""!=this.input&&(console.log(this.input),this.$http.get("/getAllProduct",{params:{keyword:this.input}}).then((function(t){e.dispose(t.data)})).catch((function(e){console.log(e)})))},clickRet:function(){this.firstClass="狗狗商品",this.secondClass="主粮",this.page=1,this.getMsg()},getpage:function(e){this.page=e},getMsg:function(){var e,t,s=this;switch(this.firstClass){case"狗狗商品":e=1;break;case"猫猫商品":e=2;break;case"奇趣小宠":e=3;break;case"水族市场":e=4;break}if(1===e)switch(this.secondClass){case"主粮":t=101;break;case"零食":t=102;break;case"玩具":t=103;break}else if(2===e)switch(this.secondClass){case"主粮":t=201;break;case"零食":t=202;break;case"猫砂":t=203;break;case"玩具":t=204;break}else if(3===e)switch(this.secondClass){case"兔子":t=301;break;case"仓鼠":t=302;break;case"龙猫":t=303;break}else if(4===e)switch(this.secondClass){case"鱼食":t=401;break;case"鱼缸":t=401;break;case"器材":t=401;break}this.$http.get("/adminGetProduct",{params:{page:this.page,class_id:e,goods_id:t}}).then((function(e){s.dispose(e.data.list),s.page_count=e.data.page_count})).catch((function(e){console.log(e)}))},dispose:function(e){this.displayGoodslist=e,this.willChangeDate=e;for(var t=[],s=e,a=0;a<s.length;a++){var i=void 0,l=void 0,n=void 0,o=void 0,c=void 0,r=void 0,d=void 0,h=void 0,u=a+1;if(i=s[a].discription,d=s[a].count,o=s[a].price,c=s[a].product_name,r=s[a].img_url,h=s[a].id,this.mid=a+1,n="",1===s[a].class_id)switch(l="狗狗商品",s[a].goods_id){case 101:n="主粮";break;case 102:n="零食";break;case 103:n="玩具";break}else if(2===s[a].class_id)switch(l="猫猫商品",s[a].goods_id){case 201:n="主粮";break;case 202:n="零食";break;case 203:n="猫砂";break;case 204:n="玩具";break}else if(3===s[a].class_id)switch(l="奇趣小宠",s[a].goods_id){case 301:n="兔子";break;case 302:n="仓鼠";break;case 303:n="龙猫";break}else if(4===s[a].class_id)switch(l="水族市场",s[a].goods_id){case 401:n="鱼食";break;case 402:n="鱼缸";break;case 403:n="器材";break}t.push({mid:u,pid:h,mprice:o,minventoryQuantity:d,mpdname:c,mimgUrl:r,mdiscription:i,firstClass:l,secondClass:n}),this.SingleStatus=t[a].mid}this.displayGoodslist=t,this.willChangeDate=t,this.changedData=t}},components:{pagenation:n["a"]}},r=c,d=(s("55ee"),s("9ca4")),h=Object(d["a"])(r,a,i,!1,null,null,null);t["default"]=h.exports},"55ee":function(e,t,s){"use strict";var a=s("5fff"),i=s.n(a);i.a},"5d82":function(e,t,s){},"5fff":function(e,t,s){},"73a4":function(e,t,s){"use strict";var a=s("5d82"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-3b4ffd4c.55260455.js.map